<md-content>
    <md-content
        ng-if="vm.options.withSearch"
        layout="row"
        layout-xs="column"
        layout-align="space-around center"
        layout-align-xs="center stretch"
        layout-margin
        class="md-whiteframe-1dp">
        <md-input-container>
            <md-select ng-model="vm.filterField" aria-label="Filter field">
                <md-option
                    ng-repeat="field in vm.filterFields"
                    ng-value="field">{{vm.options.labelFields[field]}}</md-option>
            </md-select>
        </md-input-container>
        <md-input-container>
            <md-select ng-model="vm.sortOrder" aria-label="Sort order">
                <md-option value="ASC">
                    <md-icon md-svg-icon="img/icons/up-arrow.svg"></md-icon>
                </md-option>
                <md-option value="DSC">
                    <md-icon md-svg-icon="img/icons/down-arrow.svg"></md-icon>
                </md-option>
            </md-select>
        </md-input-container>
        <md-autocomplete
              flex
              class="md-block"
              md-input-name="autocompleteField"
              md-no-cache="false"
              md-selected-item="vm.selectedItem"
              md-search-text-change="searchTextChange(searchText)"
              md-search-text="searchText"
              md-selected-item-change="selectedItemChange(vm.item)"
              md-items="item in querySearch(searchText)"
              md-item-text="item[vm.options.shownFields.title]"
              md-min-length="2"
              placeholder="{{'GRID.SEARCH_ITEMS' | translate}}">
              <md-item-template>
                <span md-highlight-text="searchText" md-highlight-flags="^i">{{(vm.filterField) ? item[vm.options.shownFields.title] + ' - ' + item[vm.filterField] : item[vm.options.shownFields.title]}}</span>
              </md-item-template>
              <md-not-found>
                <a ng-click="newItem(searchText)" translate translate-value-search="{{searchText}}">GRID.NO_ITEMS_FOUND</a>
              </md-not-found>
        </md-autocomplete>
    </md-content>
    <md-content
        ng-if="vm.options.withSelector"
        layout="row"
        layout-align="space-between center"
        layout-margin
        class="md-whiteframe-1dp">
        <md-input-container>
          <md-checkbox aria-label="Select All"
              ng-checked="allChecked()"
              md-indeterminate="isIndeterminate()"
              ng-click="toggleAll()"
              style="margin-bottom: 0"
              class="md-primary">
            <span ng-if="allChecked()" translate>GRID.UNSELECT_ALL</span>
            <span ng-if="!allChecked()" translate>GRID.SELECT_ALL</span>
          </md-checkbox>
        </md-input-container>
        <md-button aria-label="Delete"><span translate>COMMON.DELETE</span> ({{vm.selected.length}})</md-button>
    </md-content>
    <md-list>
        <md-list-item
            ng-if="!vm.items || vm.items.length === 0"
            flex
            layout-padding>
            <span translate>GRID.NO_DATA_FOUND</span>
        </md-list-item>
        <md-list-item
            ng-repeat="item in vm.items"
            class="md-whiteframe-1dp"
            ng-click="toggle(item, vm.selected)">
            <md-checkbox
                ng-if="vm.options.withSelector"
                ng-checked="exists(item)"
                class="md-primary"
                ng-click="toggle(item)"
                aria-label="Select item"></md-checkbox>
            <div layout="row"
                layout-xs="column"
                layout-align-xs="space-between start"
                layout-align="space-between center"
                flex
                layout-padding>
                <b>{{item[vm.options.shownFields.title]}}</b>
                <div ng-repeat="description in vm.options.shownFields.description">
                  {{item[description]}}
                  <md-divider hide show-xs></md-divider>
                </div>
                <div ng-if="vm.options.shownFields.corner">{{item[vm.options.shownFields.corner]}}</div>
            </div>
            <!-- <md-icon class="md-secondary" ng-click="editItem(item)" aria-label="Edit" md-svg-icon="img/icons/launch.svg"></md-icon> -->
            <md-menu>
              <md-button
                  ng-click="$mdOpenMenu()"
                  class="md-icon-button"
                  aria-label="Open row interactions menu">
                  <md-icon md-svg-icon='img/icons/more_vert.svg'></md-icon>
              </md-button>
              <md-menu-content width="2">
                <md-menu-item>
                  <md-button ng-click="editItem(item)">
                    <spam translate>COMMON.EDIT</span>
                  </md-button>
                </md-menu-item>
              </md-menu-content>
            </md-menu>
        </md-list-item>
    </md-list>
</md-content>
